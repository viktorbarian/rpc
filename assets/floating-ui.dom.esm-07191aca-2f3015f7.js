function H(t){return t.split("-")[0]}function _(t){return t.split("-")[1]}function B(t){return["top","bottom"].includes(H(t))?"x":"y"}function G(t){return t==="y"?"height":"width"}function K(t,e,n){let{reference:o,floating:i}=t;const c=o.x+o.width/2-i.width/2,r=o.y+o.height/2-i.height/2,s=B(e),f=G(s),a=o[f]/2-i[f]/2,d=H(e),l=s==="x";let u;switch(d){case"top":u={x:c,y:o.y-i.height};break;case"bottom":u={x:c,y:o.y+o.height};break;case"right":u={x:o.x+o.width,y:r};break;case"left":u={x:o.x-i.width,y:r};break;default:u={x:o.x,y:o.y}}switch(_(e)){case"start":u[s]-=a*(n&&l?-1:1);break;case"end":u[s]+=a*(n&&l?-1:1);break}return u}const mt=async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:c=[],platform:r}=n,s=await(r.isRTL==null?void 0:r.isRTL(e));let f=await r.getElementRects({reference:t,floating:e,strategy:i}),{x:a,y:d}=K(f,o,s),l=o,u={},g=0;for(let m=0;m<c.length;m++){const{name:x,fn:y}=c[m],{x:h,y:p,data:b,reset:w}=await y({x:a,y:d,initialPlacement:o,placement:l,strategy:i,middlewareData:u,rects:f,platform:r,elements:{reference:t,floating:e}});if(a=h??a,d=p??d,u={...u,[x]:{...u[x],...b}},w&&g<=50){g++,typeof w=="object"&&(w.placement&&(l=w.placement),w.rects&&(f=w.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:i}):w.rects),{x:a,y:d}=K(f,l,s)),m=-1;continue}}return{x:a,y:d,placement:l,strategy:i,middlewareData:u}};function ht(t){return{top:0,right:0,bottom:0,left:0,...t}}function ot(t){return typeof t!="number"?ht(t):{top:t,right:t,bottom:t,left:t}}function j(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function it(t,e){var n;e===void 0&&(e={});const{x:o,y:i,platform:c,rects:r,elements:s,strategy:f}=t,{boundary:a="clippingAncestors",rootBoundary:d="viewport",elementContext:l="floating",altBoundary:u=!1,padding:g=0}=e,m=ot(g),y=s[u?l==="floating"?"reference":"floating":l],h=j(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(y)))==null||n?y:y.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(s.floating)),boundary:a,rootBoundary:d,strategy:f})),p=j(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({rect:l==="floating"?{...r.floating,x:o,y:i}:r.reference,offsetParent:await(c.getOffsetParent==null?void 0:c.getOffsetParent(s.floating)),strategy:f}):r[l]);return{top:h.top-p.top+m.top,bottom:p.bottom-h.bottom+m.bottom,left:h.left-p.left+m.left,right:p.right-h.right+m.right}}const pt=Math.min,wt=Math.max;function U(t,e,n){return wt(t,pt(e,n))}const Bt=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:o=0}=t??{},{x:i,y:c,placement:r,rects:s,platform:f}=e;if(n==null)return{};const a=ot(o),d={x:i,y:c},l=B(r),u=_(r),g=G(l),m=await f.getDimensions(n),x=l==="y"?"top":"left",y=l==="y"?"bottom":"right",h=s.reference[g]+s.reference[l]-d[l]-s.floating[g],p=d[l]-s.reference[l],b=await(f.getOffsetParent==null?void 0:f.getOffsetParent(n));let w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0;w===0&&(w=s.floating[g]);const L=h/2-p/2,E=a[x],D=w-m[g]-a[y],C=w/2-m[g]/2+L,v=U(E,C,D),$=(u==="start"?a[x]:a[y])>0&&C!==v&&s.reference[g]<=s.floating[g]?C<E?E-C:D-C:0;return{[l]:d[l]-$,data:{[l]:v,centerOffset:C-v}}}}),xt={left:"right",right:"left",bottom:"top",top:"bottom"};function X(t){return t.replace(/left|right|bottom|top/g,e=>xt[e])}function yt(t,e,n){n===void 0&&(n=!1);const o=_(t),i=B(t),c=G(i);let r=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[c]>e.floating[c]&&(r=X(r)),{main:r,cross:X(r)}}const bt={start:"end",end:"start"};function Q(t){return t.replace(/start|end/g,e=>bt[e])}function vt(t){const e=X(t);return[Q(t),e,Q(e)]}const Mt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:i,rects:c,initialPlacement:r,platform:s,elements:f}=e,{mainAxis:a=!0,crossAxis:d=!0,fallbackPlacements:l,fallbackStrategy:u="bestFit",flipAlignment:g=!0,...m}=t,x=H(o),h=l||(x===r||!g?[X(r)]:vt(r)),p=[r,...h],b=await it(e,m),w=[];let L=((n=i.flip)==null?void 0:n.overflows)||[];if(a&&w.push(b[x]),d){const{main:v,cross:S}=yt(o,c,await(s.isRTL==null?void 0:s.isRTL(f.floating)));w.push(b[v],b[S])}if(L=[...L,{placement:o,overflows:w}],!w.every(v=>v<=0)){var E,D;const v=((E=(D=i.flip)==null?void 0:D.index)!=null?E:0)+1,S=p[v];if(S)return{data:{index:v,overflows:L},reset:{placement:S}};let k="bottom";switch(u){case"bestFit":{var C;const $=(C=L.map(F=>[F,F.overflows.filter(W=>W>0).reduce((W,gt)=>W+gt,0)]).sort((F,W)=>F[1]-W[1])[0])==null?void 0:C[0].placement;$&&(k=$);break}case"initialPlacement":k=r;break}if(o!==k)return{reset:{placement:k}}}return{}}}};async function At(t,e){const{placement:n,platform:o,elements:i}=t,c=await(o.isRTL==null?void 0:o.isRTL(i.floating)),r=H(n),s=_(n),f=B(n)==="x",a=["left","top"].includes(r)?-1:1,d=c&&f?-1:1,l=typeof e=="function"?e(t):e;let{mainAxis:u,crossAxis:g,alignmentAxis:m}=typeof l=="number"?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...l};return s&&typeof m=="number"&&(g=s==="end"?m*-1:m),f?{x:g*d,y:u*a}:{x:u*a,y:g*d}}const $t=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,i=await At(e,t);return{x:n+i.x,y:o+i.y,data:i}}}};function Ct(t){return t==="x"?"y":"x"}const Ft=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:i}=e,{mainAxis:c=!0,crossAxis:r=!1,limiter:s={fn:y=>{let{x:h,y:p}=y;return{x:h,y:p}}},...f}=t,a={x:n,y:o},d=await it(e,f),l=B(H(i)),u=Ct(l);let g=a[l],m=a[u];if(c){const y=l==="y"?"top":"left",h=l==="y"?"bottom":"right",p=g+d[y],b=g-d[h];g=U(p,g,b)}if(r){const y=u==="y"?"top":"left",h=u==="y"?"bottom":"right",p=m+d[y],b=m-d[h];m=U(p,m,b)}const x=s.fn({...e,[l]:g,[u]:m});return{...x,data:{x:x.x-n,y:x.y-o}}}}};function st(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function O(t){if(t==null)return window;if(!st(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function M(t){return O(t).getComputedStyle(t)}function R(t){return st(t)?"":t?(t.nodeName||"").toLowerCase():""}function rt(){const t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function A(t){return t instanceof O(t).HTMLElement}function V(t){return t instanceof O(t).Element}function Rt(t){return t instanceof O(t).Node}function J(t){if(typeof ShadowRoot>"u")return!1;const e=O(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function I(t){const{overflow:e,overflowX:n,overflowY:o}=M(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function Ot(t){return["table","td","th"].includes(R(t))}function ct(t){const e=/firefox/i.test(rt()),n=M(t);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)}function lt(){return!/^((?!chrome|android).)*safari/i.test(rt())}const Z=Math.min,N=Math.max,Y=Math.round;function T(t,e,n){var o,i,c,r;e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect();let f=1,a=1;e&&A(t)&&(f=t.offsetWidth>0&&Y(s.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Y(s.height)/t.offsetHeight||1);const d=V(t)?O(t):window,l=!lt()&&n,u=(s.left+(l&&(o=(i=d.visualViewport)==null?void 0:i.offsetLeft)!=null?o:0))/f,g=(s.top+(l&&(c=(r=d.visualViewport)==null?void 0:r.offsetTop)!=null?c:0))/a,m=s.width/f,x=s.height/a;return{width:m,height:x,top:g,right:u+m,bottom:g+x,left:u,x:u,y:g}}function P(t){return((Rt(t)?t.ownerDocument:t.document)||window.document).documentElement}function z(t){return V(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ft(t){return T(P(t)).left+z(t).scrollLeft}function Pt(t){const e=T(t);return Y(e.width)!==t.offsetWidth||Y(e.height)!==t.offsetHeight}function Tt(t,e,n){const o=A(e),i=P(e),c=T(t,o&&Pt(e),n==="fixed");let r={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&n!=="fixed")if((R(e)!=="body"||I(i))&&(r=z(e)),A(e)){const f=T(e,!0);s.x=f.x+e.clientLeft,s.y=f.y+e.clientTop}else i&&(s.x=ft(i));return{x:c.left+r.scrollLeft-s.x,y:c.top+r.scrollTop-s.y,width:c.width,height:c.height}}function at(t){return R(t)==="html"?t:t.assignedSlot||t.parentNode||(J(t)?t.host:null)||P(t)}function tt(t){return!A(t)||getComputedStyle(t).position==="fixed"?null:t.offsetParent}function Lt(t){let e=at(t);for(J(e)&&(e=e.host);A(e)&&!["html","body"].includes(R(e));){if(ct(e))return e;e=e.parentNode}return null}function q(t){const e=O(t);let n=tt(t);for(;n&&Ot(n)&&getComputedStyle(n).position==="static";)n=tt(n);return n&&(R(n)==="html"||R(n)==="body"&&getComputedStyle(n).position==="static"&&!ct(n))?e:n||Lt(t)||e}function et(t){if(A(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=T(t);return{width:e.width,height:e.height}}function Et(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=A(n),c=P(n);if(n===c)return e;let r={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((i||!i&&o!=="fixed")&&((R(n)!=="body"||I(c))&&(r=z(n)),A(n))){const f=T(n,!0);s.x=f.x+n.clientLeft,s.y=f.y+n.clientTop}return{...e,x:e.x-r.scrollLeft+s.x,y:e.y-r.scrollTop+s.y}}function Vt(t,e){const n=O(t),o=P(t),i=n.visualViewport;let c=o.clientWidth,r=o.clientHeight,s=0,f=0;if(i){c=i.width,r=i.height;const a=lt();(a||!a&&e==="fixed")&&(s=i.offsetLeft,f=i.offsetTop)}return{width:c,height:r,x:s,y:f}}function Dt(t){var e;const n=P(t),o=z(t),i=(e=t.ownerDocument)==null?void 0:e.body,c=N(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=N(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let s=-o.scrollLeft+ft(t);const f=-o.scrollTop;return M(i||n).direction==="rtl"&&(s+=N(n.clientWidth,i?i.clientWidth:0)-c),{width:c,height:r,x:s,y:f}}function ut(t){const e=at(t);return["html","body","#document"].includes(R(e))?t.ownerDocument.body:A(e)&&I(e)?e:ut(e)}function dt(t,e){var n;e===void 0&&(e=[]);const o=ut(t),i=o===((n=t.ownerDocument)==null?void 0:n.body),c=O(o),r=i?[c].concat(c.visualViewport||[],I(o)?o:[]):o,s=e.concat(r);return i?s:s.concat(dt(r))}function St(t,e){const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&J(n)){let o=e;do{if(o&&t===o)return!0;o=o.parentNode||o.host}while(o)}return!1}function kt(t,e){const n=T(t,!1,e==="fixed"),o=n.top+t.clientTop,i=n.left+t.clientLeft;return{top:o,left:i,x:i,y:o,right:i+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}function nt(t,e,n){return e==="viewport"?j(Vt(t,n)):V(e)?kt(e,n):j(Dt(P(t)))}function Wt(t){const e=dt(t),o=["absolute","fixed"].includes(M(t).position)&&A(t)?q(t):t;return V(o)?e.filter(i=>V(i)&&St(i,o)&&R(i)!=="body"):[]}function Nt(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=[...n==="clippingAncestors"?Wt(e):[].concat(n),o],s=r[0],f=r.reduce((a,d)=>{const l=nt(e,d,i);return a.top=N(l.top,a.top),a.right=Z(l.right,a.right),a.bottom=Z(l.bottom,a.bottom),a.left=N(l.left,a.left),a},nt(e,s,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}const Ht={getClippingRect:Nt,convertOffsetParentRelativeRectToViewportRelativeRect:Et,isElement:V,getDimensions:et,getOffsetParent:q,getDocumentElement:P,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:Tt(e,q(n),o),floating:{...et(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>M(t).direction==="rtl"},jt=(t,e,n)=>mt(t,e,{platform:Ht,...n});export{Bt as a,jt as c,Mt as f,$t as o,Ft as s};
