import{r as C,c as v,h as i,H as S,g as T}from"./index-17cfbcc7.js";import{c as E}from"./index-713f92a5-09099cb6.js";import{e as k}from"./utils-3cf81b34-7d965a95.js";/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const W={defaults:{sortBy:"number"},getLongestContent({rows:e,columnIndex:t}){return e[0][t]},render:({field:e,content:t,component:s,rowIndex:l,columnIndex:a})=>{const{style:o="checkbox",editable:r=!1,label:c}=e,d={checked:t,disabled:!r,label:c};switch(r&&(d.onScaleChange=h=>{const{value:n}=h.detail;s.rows[l][a]=n,s.triggerEditEvent(n,l,a)}),o){case"switch":return i("scale-switch",Object.assign({},d));default:return i("scale-checkbox",Object.assign({},d))}}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const M={defaults:{sortBy:"text"},render:({content:e,isAutoWidthCheck:t})=>{let s=e;return t&&(s=s.replace(/[0-9]/g,"8")),i("p",{class:"scl-body"},s)}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const z={defaults:{sortBy:"text"},render:({content:e})=>{const t=e.replace(/^mailto:/i,"");return i("scale-link",{href:e},t)}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const L={defaults:{sortBy:"number"},render:({field:e,content:t})=>{const{style:s="progress",min:l=0,max:a=100}=e,o=(t-l)/(a-l)*100;switch(s){case"bar":return i("div",{class:"tbody__bar-cell"},i("scale-progress-bar",{"aria-hidden":"true",percentage:o,mute:!0,style:{maxWidth:"200px"},styles:`.progress-bar__outer {
                min-width: 50px;
                max-width: 200px;
              }
              .progress-bar__inner {
                background: var(--telekom-color-ui-faint) !important;
              }
              `}),i("p",{class:"scl-body"},t));default:return i("scale-progress-bar",{percentage:o,showStatus:!0,mute:!0,styles:`.progress-bar__outer {
              min-width: 50px;
              max-width: 200px;
            }
            .progress-bar__inner {
                background: var(--telekom-color-functional-informational-standard) !important;
              }
            `})}}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const D={defaults:{sortBy:"text"},render:({content:e})=>{const t=e.replace(/^https?\:\/\//i,"");return i("scale-link",{href:e,target:"_blank"},t)}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const R={defaults:{},getLongestContent({rows:e,columnIndex:t}){return e[0][t]},render:({content:e,component:t})=>e&&i("scale-button",{variant:"secondary",size:"small","icon-only":!0,"aria-label":`Activate to ${e.isExpanded?"collapse":"expand"} content`,onClick:()=>{e.isExpanded=!e.isExpanded,t.forceRender++}},e.isExpanded?i("scale-icon-navigation-collapse-up",{size:14}):i("scale-icon-navigation-collapse-down",{size:14}))};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const A={defaults:{textAlign:"right",sortBy:"number"},render:({field:e,content:t,component:s,rowIndex:l,columnIndex:a,isAutoWidthCheck:o})=>{const{precision:r=1/0,decimalSymbol:c=".",groupSymbol:d="",prefix:h="",suffix:n="",editable:g=!1,label:y}=e;if(o&&g)return i("p",{class:"scl-body",style:{paddingRight:"26px"}},t);const f=`0.${(String(t).split(".")[1]||"").split("").map(()=>"0")}`.replace(/,/g,"");if(g){const p={type:"number",size:"small",step:f.slice(0,f.length-1)+"1",value:String(t),styles:`.text-field__control {
          text-align: right !important;
        }`,label:y};return p.onScaleChange=({detail:_})=>{const{value:w}=_;s.rows[l][a]=w,s.triggerEditEvent(w,l,a)},i("scale-text-field",Object.assign({},p))}else{let p=t;if(o&&(p=Number(p.toString().replace(/[0-9]/g,"8"))),r<100?p=Number(p).toFixed(r):p=p.toString(),d||c!=="."){const _=p.split(".");d&&(_[0]=_[0].replace(/\B(?=(\d{3})+(?!\d))/g,d)),p=_.join(c)}return(h||n)&&(p=h+p+n),i("p",{class:"scl-body",style:{textAlign:"right"}},p)}}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const $={defaults:{sortBy:"text"},render:({field:e,content:t,component:s,rowIndex:l,columnIndex:a,isAutoWidthCheck:o})=>{const{options:r,editable:c=!1,label:d}=e;if(o)return i("p",{class:"scl-body",style:{paddingRight:"56px"}},t);const h={disabled:!c,value:t,label:d};return c&&(h.onScaleChange=({detail:n})=>{const{value:g}=n;s.rows[l][a]=g,s.triggerEditEvent(g,l,a)}),i("scale-dropdown",Object.assign({size:"small"},h),r.map(n=>i("option",{value:n,selected:n===t},n)))}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const H={defaults:{sortBy:"text"},render:({content:e})=>{const t=e.split(",").map(s=>s.trim());return i("ul",{class:"tbody__tag-list"},t.map(s=>i("li",null,i("scale-tag",{size:"small",type:"strong"},s))))}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const B={defaults:{sortBy:"text"},render:({content:e})=>{const t=e.replace(/^tel:/i,"");return i("scale-link",{href:e},t)}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const P={defaults:{sortBy:"text"},render:({field:e,content:t,component:s,rowIndex:l,columnIndex:a,isAutoWidthCheck:o})=>{const{variant:r="body",editable:c=!1,iconPrefix:d,iconSuffix:h,label:n}=e;if(o&&c)return i("p",{class:"scl-body",style:{paddingRight:"26px"}},t);if(c){const g={type:"text",value:t,label:n};return g.onScaleChange=({detail:y})=>{const{value:f}=y;s.rows[l][a]=f,s.triggerEditEvent(f,l,a)},i("scale-text-field",Object.assign({},g))}else{let g=t;return o&&(g+="w"),i("div",{class:"tbody__text-cell"},d&&i("span",{class:"tbody__text-cell-prefix"},i(`scale-icon-${d}`)),i("p",{class:`scl-${r}`},g),h&&i("span",{class:"tbody__text-cell-suffix"},i(`scale-icon-${h}`)))}}};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */var N=function(e,t){var s={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(s[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(s[l[a]]=e[l[a]]);return s};const O={defaults:{},render:({content:e})=>i("div",{class:"tbody__actions"},e.map(t=>{const{label:s}=t,l=N(t,["label"]);return typeof s=="object"&&"__html"in s?i("scale-button",Object.assign({innerHTML:s.__html},l)):i("scale-button",Object.assign({},l),s)}))};/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const u={checkbox:W,date:M,email:z,graph:L,html:R,link:D,number:A,select:$,tags:H,telephone:B,text:P,actions:O},j="text",m={maxWidth:1/0,minWidth:20,resizable:!0,sortable:!1,sortBy:"text",textAlign:"left",visible:!0,width:"auto"},U=`.scl-body{margin:0;font:var(--telekom-text-style-body)}.scl-label{margin:0;font:var(--telekom-text-style-small)}.scl-h1{margin:0;font:var(--telekom-text-style-heading-1)}.scl-h2{margin:0;font:var(--telekom-text-style-heading-2)}.scl-h3{margin:0;font:var(--telekom-text-style-heading-3)}.scl-h4{margin:0;font:var(--telekom-text-style-heading-4)}.scl-h5{margin:0;font:var(--telekom-text-style-heading-5)}.scl-h6{margin:0;font:var(--telekom-text-style-heading-6)}:host{font-family:var(--telekom-typography-font-family-sans);font-size:var(--telekom-typography-font-size-body);font-weight:var(--telekom-typography-font-weight-regular);line-height:var(--telekom-typography-line-spacing-standard);color:var(--telekom-color-text-and-icon-standard)}.data-grid input,.data-grid select{letter-spacing:inherit;font-weight:inherit;font-family:inherit;line-height:inherit}.data-grid{position:relative;display:block;background:var(--telekom-color-ui-state-fill-standard);border-radius:var(--telekom-radius-large);border:1px solid var(--telekom-color-ui-faint);overflow:hidden}.data-grid--hide-border{border:none}.data-grid__auto-width-check{opacity:0}.data-grid__title-block{display:flex;align-items:center;justify-content:space-between;padding-right:62px;padding-left:var(--telekom-spacing-unit-x6)}.data-grid__settings-menu{position:absolute;top:var(--telekom-spacing-unit-x4);right:var(--telekom-spacing-unit-x4)}.data-grid__scroll-container{overflow:auto;overflow-x:overlay;overflow-y:overlay;ms-overflow-style:-ms-autohiding-scrollbar;scrollbar-gutter:stable}.data-grid__table{border-spacing:0;border-collapse:collapse;overflow:hidden}.data-grid--hide-menu .data-grid__settings-menu{display:none}.data-grid:not(.data-grid--hide-menu) .data-grid__title-block{min-height:72px}.data-grid--hide-menu .data-grid__title-block{padding-right:var(--telekom-spacing-unit-x4)}.thead{display:block;white-space:nowrap;border-bottom:1px solid var(--telekom-color-ui-faint);position:relative;background:var(--telekom-color-ui-state-fill-standard);z-index:1}.data-grid--freeze-header .thead{z-index:30;background-color:var(--telekom-color-background-canvas)}.thead-sortable{cursor:pointer}.thead-sortable:focus{box-shadow:inset 0 0 0 var(--telekom-spacing-unit-x05)
    var(--telekom-color-functional-focus-standard)}.thead__cell{display:inline-flex;align-items:center;height:var(--telekom-spacing-unit-x8);text-align:left;user-select:none;position:relative;padding:0 var(--telekom-spacing-unit-x4);color:var(--telekom-color-text-and-icon-additional)}.thead__cell--numbered{text-align:right;justify-content:flex-end}.thead__cell--selection{justify-content:center;text-align:center}.thead__cell--selection xds-checkbox::part(container){justify-content:center}.thead__title{color:var(--telekom-color-text-and-icon-standard)}.thead__text{font-size:var(--telekom-typography-font-size-small);line-height:var(--telekom-typography-line-spacing-standard);position:relative}.thead__arrow-top,.thead__arrow-bottom{position:absolute;display:none;top:4px;left:-12px;border:4px solid transparent}.thead__arrow-top{border-top:none;border-bottom:5px solid var(--telekom-color-text-and-icon-standard)}.thead__arrow-bottom{border-bottom:none;border-top:5px solid var(--telekom-color-text-and-icon-standard)}.thead__sort-prompt{position:absolute;top:0;left:0;width:100%;height:100%;margin:0;background:none;border:0;opacity:1;cursor:pointer}.thead__divider{position:absolute;right:calc(-1 * var(--telekom-spacing-unit-x2));bottom:0px;height:100%;padding:19px var(--telekom-spacing-unit-x2) 0px;box-sizing:border-box;cursor:col-resize;z-index:1}.thead__divider-line{pointer-events:none;height:100%;width:1px;background:var(--telekom-color-ui-faint)}.thead__cell:first-child{padding-left:var(--telekom-spacing-unit-x6)}.thead__cell:focus{outline:none}.thead__cell[aria-sort='ascending'] .thead__arrow-top{display:block}.thead__cell[aria-sort='descending'] .thead__arrow-bottom{display:block}.thead__cell[aria-sort]:hover{color:var(--telekom-color-text-and-icon-primary-hovered)}.thead__cell[aria-sort='none']:hover .thead__arrow-top,.thead__cell[aria-sort='none']:hover .thead__arrow-bottom{display:none}.thead__cell[aria-sort='ascending']:hover .thead__arrow-top{border-bottom:5px solid var(--telekom-color-text-and-icon-primary-hovered)}.thead__cell[aria-sort='descending']:hover .thead__arrow-bottom{border-top:5px solid var(--telekom-color-text-and-icon-primary-hovered)}.tbody{display:block}.tbody__row{display:block;white-space:nowrap}.tbody__mobile-title{display:none}.tbody__mobile-label{display:none}.tbody__cell{display:inline-block;margin:8px;padding:8px;overflow:hidden;line-height:32px}.tbody__cell--numbered{text-align:right}.tbody__cell--selection{justify-content:center;text-align:center}.tbody__cell--selection scale-checkbox::part(container),.tbody__cell--selection scale-checkbox [part='container']{justify-content:center}.tbody__cell scale-checkbox{width:auto}.tbody__nested{white-space:nowrap;padding:0px;margin:0px}.tbody__nested-cell{display:block;padding:var(--telekom-spacing-unit-x4);margin:0px}.tbody__cell:first-of-type{margin-left:var(--telekom-spacing-unit-x4);}.tbody__nested-cell:first-child{margin-left:0px}.data-grid--shade-alternate .tbody__row:nth-of-type(even),.data-grid--shade-alternate .tbody__nested:nth-of-type(even){background:var(--telekom-color-background-surface-subtle)}.data-grid__auto-width-check .tbody__cell{padding:0}.tbody__tag-list{list-style:none;padding:0;margin:0}.tbody__tag-list li{display:inline-block;margin-right:8px}.tbody__tag-list li:last-child{margin-right:0}.data-grid input[type='checkbox']{display:block;height:14px;margin:5px 4px}.tbody__text-cell{display:flex;align-items:center}.tbody__text-cell-prefix{display:inline-flex;align-items:center;margin-right:0.5em}.tbody__text-cell-suffix{display:inline-flex;align-items:center;margin-left:0.5em}.tbody__cell p{overflow:hidden;text-overflow:ellipsis}.tbody__cell scale-link{overflow:hidden;text-overflow:ellipsis}.tbody__bar-cell{display:inline-flex;width:100%}.tbody__cell scale-progress-bar{flex-grow:1}.tbody__actions scale-button{margin-right:var(--telekom-spacing-unit-x2)}.info{height:44px;position:relative;border-top:var(--telekom-line-weight-standard) solid
    var(--telekom-color-ui-subtle);display:flex;justify-content:center}.info__selection{position:absolute;bottom:0;line-height:54px;left:var(--telekom-spacing-unit-x6)}.data-grid--hide-border:not(.data-grid--mobile) .info__pagination{border-bottom:1px solid var(--telekom-color-ui-subtle);border-right:1px solid var(--telekom-color-ui-subtle)}.data-grid--mobile{border:none;background:none}.data-grid--mobile .data-grid__title-block{padding-left:0;padding-right:46px}.data-grid--hide-menu.data-grid--mobile .data-grid__title-block{padding-right:0}.data-grid--mobile .data-grid__settings-menu{right:0}.data-grid--mobile .data-grid__scroll-container{height:auto !important}.data-grid--mobile .data-grid__table{display:block;height:auto !important}.data-grid--mobile .thead{display:none}.data-grid--mobile .tbody{display:block}.data-grid--mobile .tbody__row{display:block;position:relative;white-space:initial;margin:0 0 var(--telekom-spacing-unit-x2);padding:var(--telekom-spacing-unit-x6);border-radius:var(--telekom-radius-standard);background:var(--telekom-color-background-surface);border:1px solid var(--telekom-color-ui-faint)}.data-grid--mobile .tbody__row:hover{background:var(--telekom-color-background-surface)}.data-grid--mobile .tbody__mobile-title{display:block;margin-bottom:var(--telekom-spacing-unit-x2)}.data-grid--mobile .tbody__mobile-label{display:block}.data-grid--mobile .tbody__cell{display:flex;align-items:center;width:auto !important;padding:5px 0;margin:0;min-height:var(--telekom-spacing-unit-x6);line-height:var(--telekom-spacing-unit-x6);overflow:auto;overflow-x:hidden}.data-grid--mobile .tbody__cell--used-as-mobile-title{display:none}.data-grid--mobile .tbody__mobile-label{display:block;width:100px;flex-shrink:0;color:var(--telekom-color-text-and-icon-additional);font-size:var(--telekom-typography-font-size-small);font-weight:var(--telekom-typography-font-weight-medium)}.data-grid--mobile .tbody__cell:first-child{margin-left:0px}.data-grid--mobile .tbody__cell--selection{position:absolute;top:19px;right:12px}.data-grid--mobile .tbody__cell--numbered{position:absolute;top:19px;right:56px}.data-grid--mobile .tbody__cell scale-text-field,.data-grid--mobile .tbody__cell scale-dropdown{width:100%}.data-grid--mobile .tbody__nested{width:auto !important}.data-grid--mobile .tbody__nested-cell{padding:0;margin-bottom:var(--telekom-spacing-unit-x2)}.data-grid--mobile.data-grid--shade-alternate .tbody__row:nth-of-type(even){background:var(--telekom-color-background-surface)}.data-grid--mobile .info{height:auto;border-top:none;text-align:center}.data-grid--mobile .info__selection{position:relative;left:0}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}`;let x;const b="data-grid",V=class{constructor(e){C(this,e),this.scaleEdit=v(this,"scale-edit",7),this.scaleEditLegacy=v(this,"scaleEdit",7),this.scaleSort=v(this,"scale-sort",7),this.scaleSortLegacy=v(this,"scaleSort",7),this.forceRender=0,this.paginationStart=0,this.scrollY=0,this.freezeHeader=!1,this.heading="",this.hideBorder=!1,this.hideHeader=!1,this.hideInfo=!1,this.hideMenu=!1,this.numbered=!1,this.pageSize=1/0,this.selectable=!1,this.selection=[],this.shadeAlternate=!0,this.visible=!0,this.activeSortingIndex=-1,this.contentWidth=100,this.dataNeedsCheck=!0,this.hasData=!1,this.isMobile=!1,this.isPagination=!1,this.isSortable=!1,this.lastContainerWidth=100,this.mobileTitleIndex=-1,this.needsAutoWidthParse=!1,this.needsColumnResize=!1,this.numberColumnWidth=0,this.selectionColumnWidth=22,this.handleMenuListClick=t=>{const s=["sortBy","toggleVisibility"],l=s.indexOf(t.target.id);if(l>-1){const a=this.hostElement.shadowRoot.querySelector(`#${s[1-l]}List`);a&&a.setAttribute("opened","false")}},this.onDividerMove=this.onDividerMove.bind(this),this.onDividerUp=this.onDividerUp.bind(this),this.applyResponsiveClasses=this.applyResponsiveClasses.bind(this),this.updateColumnStretching=this.updateColumnStretching.bind(this)}componentWillLoad(){this.fieldsHandler(),this.rowsHandler()}componentWillUpdate(){}componentDidRender(){this.needsAutoWidthParse&&this.calculateAutoWidths(),setTimeout(()=>{this.needsColumnResize&&this.updateColumnStretching()})}componentDidLoad(){this.addResizeObserver()}componentDidUpdate(){}disconnectedCallback(){this.removeResizeObserver()}fieldsHandler(){this.parseFields(),this.checkForMobileTitle(),this.checkForSortableFields(),this.dataNeedsCheck=!0}rowsHandler(){this.paginationStart>this.rows.length&&(this.paginationStart=this.rows.length-this.rows.length%this.pageSize),this.parseRows(),this.setInitialRowProps(),this.resetSortingToggle(),this.dataNeedsCheck=!0,this.needsAutoWidthParse=!0,this.needsColumnResize=!0,this.rows.length<=this.paginationStart&&this.paginationStart-this.pageSize>-1&&(this.paginationStart=this.paginationStart-this.pageSize)}parseFields(){this.fields&&typeof this.fields=="string"&&(this.fields=JSON.parse(this.fields))}parseRows(){this.rows&&typeof this.rows=="string"&&(this.rows=JSON.parse(this.rows))}setInitialRowProps(){!this.rows||!this.rows.length||(this.rows.forEach((e,t)=>{e.initialIndex=t,e.selected=!1}),this.isPagination=this.pageSize<=this.rows.length-1)}checkHasData(){if(!this.fields)return!1;for(let e=0;e<this.fields.length;e++)if(this.fields[e].type||(this.fields[e].type=j),!u[this.fields[e].type])return console.warn(`Unrecognised field type: "${this.fields[e].type}"`),!1;if(!this.rows||!this.rows.length)return!1;for(let e=0;e<this.rows.length;e++)if(this.rows[e].length!==this.fields.length)return console.warn(`Unable to render ${this.heading&&`"${this.heading}" `}table: row data length not equal to supplied fields.`),!1;return!0}checkForMobileTitle(){this.mobileTitleIndex=-1,this.fields&&this.fields.every(({mobileTitle:e},t)=>e?(this.mobileTitleIndex=t,!1):!0)}checkForSortableFields(){this.isSortable=!1,this.fields&&this.fields.forEach(({sortable:e})=>{e&&(this.isSortable=!0)})}getCssClassMap(){return E(b,!this.isMobile&&`${b}--desktop`,this.isMobile&&`${b}--mobile`,this.shadeAlternate&&`${b}--shade-alternate`,this.freezeHeader&&`${b}--freeze-header`,this.hideBorder&&`${b}--hide-border`,this.hideMenu&&`${b}--hide-menu`)}polyfillMousePosition(e){e.changedTouches&&e.changedTouches.length&&(e.x=e.changedTouches[0].pageX,e.y=e.changedTouches[0].pageY),e.x===void 0&&(e.x=e.clientX,e.y=e.clientY)}getDefaultLongestContent({rows:e,columnIndex:t}){let s=0,l;return e.forEach(a=>{const o=a[t].toString().length;o>s&&(l=a[t],s=o)}),l}toggleSelectAll(){this.elToggleSelectAll&&(this.rows.forEach(e=>e.selected=this.elToggleSelectAll.checked),this.updateReadableSelection(),this.forceRender++)}toggleRowSelect({target:e},t){this.rows[t].selected=e.checked,this.updateReadableSelection(),this.forceRender++}updateReadableSelection(){this.selection.length=0,this.rows.forEach(t=>t.selected&&this.selection.push(t));const e=this.hostElement.shadowRoot.querySelector(".thead__cell--selection scale-checkbox");e.checked=!!this.selection.length}toggleTableSorting(e,t,s){this.activeSortingIndex>-1&&this.activeSortingIndex!==t&&(this.fields[this.activeSortingIndex].sortDirection="none"),this.activeSortingIndex=t;const l=e==="none"?"ascending":e==="ascending"?"descending":"none";this.fields[t].sortDirection=l,this.sortTable(l,s,t)}sortTable(e,t,s){if(e==="none")this.rows.sort((l,a)=>l.initialIndex-a.initialIndex);else switch(u[t]&&u[t].defaults&&u[t].defaults.sortBy||m.sortBy){case"text":e==="ascending"?this.rows.sort((l,a)=>{const o=l[s].toLowerCase(),r=a[s].toLowerCase();return o<r?-1:o>r?1:0}):this.rows.sort((l,a)=>{const o=l[s].toLowerCase(),r=a[s].toLowerCase();return o>r?-1:o<r?1:0});break;case"number":e==="ascending"?this.rows.sort((l,a)=>Number(l[s])-Number(a[s])):this.rows.sort((l,a)=>Number(a[s])-Number(l[s]));break}this.forceRender++,this.triggerSortEvent(e,t,s)}resetSortingToggle(){this.activeSortingIndex>-1&&(this.fields[this.activeSortingIndex].sortDirection="none"),this.activeSortingIndex=-1}onDividerDown(e){this.polyfillMousePosition(e),e.preventDefault(),this.activeDivider=e.target,e.target.downX=e.x,this.activeDivider.interactiveWidth=0,window.addEventListener("mousemove",this.onDividerMove),window.addEventListener("touchmove",this.onDividerMove),window.addEventListener("mouseup",this.onDividerUp),window.addEventListener("touchend",this.onDividerUp)}onDividerMove(e){this.polyfillMousePosition(e);const{width:t,min:s,max:l}=this.activeDivider.dataset,a=e.x-this.activeDivider.downX,o=Math.min(Number(l),Math.max(Number(s),Number(t)+a)),r=o-Number(t);this.activeDivider.interactiveWidth=o,this.activeDivider.style.transform=`translateX(${r}px)`}onDividerUp(){const{index:e}=this.activeDivider.dataset;this.activeDivider.interactiveWidth&&(this.fields[Number(e)].width=this.activeDivider.interactiveWidth),this.activeDivider.style.transform="translateX(0px)",window.removeEventListener("mousemove",this.onDividerMove),window.removeEventListener("touchmove",this.onDividerMove),window.removeEventListener("mouseup",this.onDividerUp),window.removeEventListener("touchend",this.onDividerUp),this.needsColumnResize=!0,this.updateColumnStretching(),this.forceRender++}toggleVisibilityMenu(e){e.preventDefault();const t=this.hostElement.shadowRoot.querySelector(".visibility-toggle"),s=t.children[1];t.style.display==="none"?(t.style.display="block",s.style.transform=`translate(${e.clientX}px, ${e.clientY}px)`):t.style.display="none"}toggleColumnVisibility(e,t){this.fields[t].visible=e,this.forceRender++,this.needsColumnResize=!0,this.updateColumnStretching()}addResizeObserver(){x||(x=new ResizeObserver(e=>{for(const t of e){if(t.target.offsetParent===null)return;t.target.applyResponsiveClasses(t),t.target.updateColumnStretching()}})),this.elMmainContainer=this.hostElement.shadowRoot.querySelector(`.${b}`),this.elMmainContainer.applyResponsiveClasses=this.applyResponsiveClasses,this.elMmainContainer.updateColumnStretching=this.updateColumnStretching,x.observe(this.elMmainContainer)}removeResizeObserver(){this.elMmainContainer&&x.unobserve(this.elMmainContainer)}applyResponsiveClasses(){const e=this.elMmainContainer.offsetWidth<=500;this.isMobile!==e&&this.forceRender++,this.isMobile=e}updateColumnStretching(){if(this.needsAutoWidthParse)return;const e=this.elMmainContainer,t=e.offsetWidth-2;if(!(this.lastContainerWidth!==t)&&!this.needsColumnResize||(this.needsColumnResize=!1,this.lastContainerWidth=t,e.offsetWidth<=500))return;const l=(()=>{let o=0;return o+=8,this.numbered&&(o+=this.numberColumnWidth+32),this.selectable&&(o+=this.selectionColumnWidth+32,this.numbered&&(o-=16)),this.fields.forEach(({visible:r=!0,width:c})=>{r&&(o+=c+32)}),o})();this.contentWidth=Math.max(l,t);const a=t-l;if(a<=0)this.fields.forEach(o=>o.stretchWidth=0);else{let o=0,r=0;this.fields.forEach(({visible:d=!0,stretchWeight:h})=>{d&&(typeof h=="number"?o+=h:r++)});const c=Math.max(0,1-o);o=Math.max(1,o),this.fields.forEach(d=>{const{visible:h=!0,stretchWeight:n}=d;if(!h)return;let g=0;typeof n=="number"?g=n/o:c>0&&(g=c/r),d.stretchWidth=a*g})}this.forceRender++}calculateAutoWidths(){let e=!1;this.hostElement.shadowRoot.querySelectorAll(`.${b}__auto-width-check td`).forEach(s=>{!e&&s.offsetParent!==null&&(e=!0),e&&(this.fields[s.dataset.columnindex].width=s.clientWidth)}),e&&setTimeout(()=>{this.needsAutoWidthParse=!1,this.forceRender++})}triggerSortEvent(e,t,s){const l={rows:this.rows,type:t,sortDirection:e,columnIndex:s};k(this,"scaleSort",l)}triggerEditEvent(e,t,s){const l={rows:this.rows,rowIndex:t,columnIndex:s,value:e};k(this,"scaleEdit",l),this.forceRender++}onTableScroll(){if(!this.freezeHeader||this.hideHeader)return;const e=this.elScrollContainer.scrollTop;this.elTableHead.style.transform=`translateY(${e}px)`}renderSettingsMenu(){return i("scale-menu-flyout",{class:`${b}__settings-menu`},i("scale-button",{slot:"trigger",variant:"secondary","icon-only":!0,"data-sortable":this.isSortable},i("scale-icon-service-settings",{accessibilityTitle:"Table options"})),i("scale-menu-flyout-list",null,this.isSortable&&i("scale-menu-flyout-item",{id:"sortBy",onClick:this.handleMenuListClick},i("scale-icon-action-sort",{slot:"prefix"}),"Sort By",i("scale-menu-flyout-list",{slot:"sublist",id:"sortByList"},this.fields.map(({label:e,type:t,sortable:s,sortDirection:l="none"},a)=>s?i("scale-menu-flyout-item",{"onScale-select":()=>this.toggleTableSorting(l,a,t)},l==="ascending"&&i("scale-icon-navigation-collapse-up",{size:16,slot:"prefix"}),l==="descending"&&i("scale-icon-navigation-collapse-down",{size:16,slot:"prefix"}),l==="none"&&i("scale-icon-navigation-collapse-up",{size:16,slot:"prefix",style:{opacity:"0"}}),e||t):""))),i("scale-menu-flyout-item",{id:"toggleVisibility",onClick:this.handleMenuListClick},i("scale-icon-action-hide-password",{slot:"prefix"}),"Toggle Visibility",i("scale-menu-flyout-list",{slot:"sublist","close-on-select":"false",id:"toggleVisibilityList"},this.fields.map(({label:e,type:t,visible:s=u[t].defaults.visible!==void 0?u[t].defaults.visible:m.visible},l)=>i("scale-menu-flyout-item",{checkable:"checkbox",checked:!!s,"onScale-select":()=>this.toggleColumnVisibility(!s,l)},e||t)))),this.selectable&&i("scale-menu-flyout-item",{"onScale-select":()=>{this.elToggleSelectAll.checked=!this.elToggleSelectAll.checked,this.toggleSelectAll()}},i("scale-icon",{slot:"prefix",path:"M20.9328 10.6668C20.5132 10.6668 20.1731 11.0069 20.1731 11.4265V20.3269H1.5194V1.67309H16.5049C16.9245 1.67309 17.2646 1.33292 17.2646 0.913386C17.2646 0.49385 16.9245 0.153687 16.5049 0.153687H0.759699C0.340163 0.153687 0 0.49385 0 0.913386V21.0866C0 21.5062 0.340163 21.8463 0.759699 21.8463H20.9328C21.3523 21.8463 21.6925 21.5062 21.6925 21.0866V11.4265C21.6925 11.0069 21.3524 10.6668 20.9328 10.6668ZM23.7774 0.653387C23.4807 0.356739 22.9997 0.356739 22.703 0.653387L10.3293 13.0272L7.25501 9.9529C6.9583 9.65625 6.47732 9.65625 6.18061 9.9529C5.88396 10.2496 5.88396 10.7306 6.18061 11.0273L9.7921 14.6388C9.94045 14.7871 10.1349 14.8613 10.3293 14.8613C10.5237 14.8613 10.7181 14.7871 10.8665 14.6388L23.7774 1.72778C24.0741 1.43108 24.0741 0.950095 23.7774 0.653387Z"}),"Select / Deselect All"),i("slot",{name:"menu"})))}renderTable(){return this.needsAutoWidthParse?this.renderAutoWidthCheck():i("div",{ref:e=>this.elScrollContainer=e,class:`${b}__scroll-container`,style:{height:this.height||"auto"},onScroll:()=>this.onTableScroll()},i("table",{class:`${b}__table`},this.renderTableHead(),this.renderTableBody()))}renderAutoWidthCheck(){this.numberColumnWidth=this.rows.length.toString().length*9;const e=[];return this.fields.forEach(({type:t,width:s=u[t].defaults.width||m.width},l)=>{s==="auto"&&e.push(l)}),e.length?i("table",{class:`${b}__auto-width-check ${b}__table`},i("tr",{class:"tbody__row"},e.map(t=>{const s=this.fields[t],{type:l,cell:a=u[l]}=s,r=(a.getLongestContent||this.getDefaultLongestContent)({rows:this.rows,columnIndex:t,field:s});return i("td",{class:"tbody__cell",style:{width:"auto"},"data-columnindex":t},a.render({field:s,content:r,component:this,isAutoWidthCheck:!0}))}))):(this.needsAutoWidthParse=!1,this.renderTable())}renderTableHead(){return i("thead",{ref:e=>this.elTableHead=e,class:`thead ${this.hideHeader?"sr-only":""}`},i("tr",{class:"thead__row"},this.numbered&&this.renderTableHeadNumberedCell(),this.selectable&&this.renderTableHeadSelectableCell(),this.fields.map(({type:e,label:t="",visible:s=u[e].defaults.visible!==void 0?u[e].defaults.visible:m.visible,sortable:l,sortDirection:a="none",resizable:o=u[e].defaults.resizable!==void 0?u[e].defaults.resizable:m.resizable,width:r=u[e].defaults.width||m.width,minWidth:c=u[e].defaults.minWidth||m.minWidth,maxWidth:d=u[e].defaults.maxWidth||m.maxWidth,textAlign:h=u[e].defaults.textAlign||m.textAlign,stretchWidth:n=0},g)=>{if(!s)return;const y={class:"thead__cell",style:{width:`calc(${r}px + ${n}px)`,"justify-content":h},"data-type":e};return l&&(y["aria-sort"]=a),i("th",Object.assign({title:"Activate to sort column"},y,l?{onKeyDown:f=>{["Enter"," "].includes(f.key)&&this.toggleTableSorting(a,g,e)},onClick:()=>{this.toggleTableSorting(a,g,e)},tabindex:0,class:`${y.class} thead-sortable`}:{}),i("div",{class:"thead__title"},i("span",{class:"thead__text"},l&&i("span",{class:"thead__arrow-top"}),l&&i("span",{class:"thead__arrow-bottom"}),t)),o&&i("div",{class:"thead__divider","data-index":g,"data-width":r,"data-min":c,"data-max":d,onMouseDown:f=>this.onDividerDown(f),onTouchStart:f=>this.onDividerDown(f),"aria-hidden":"true"},i("div",{class:"thead__divider-line"})))})))}renderTableHeadNumberedCell(){return i("th",{class:"thead__cell  thead__cell--numbered",style:{width:this.numberColumnWidth+"px"}},i("span",{class:"scl-body"},"#"))}renderTableHeadSelectableCell(){const e={width:this.selectionColumnWidth+"px"};return this.numbered&&(e.paddingLeft="0px"),i("th",{class:"thead__cell thead__cell--selection",style:e,title:"Select"},i("scale-checkbox",{ref:t=>this.elToggleSelectAll=t,onScaleChange:()=>this.toggleSelectAll(),hideLabel:!0,"aria-label":"Select"}))}renderTableBody(){return i("tbody",{class:"tbody"},(()=>{const e=[],t=this.rows.length,s=this.paginationStart,l=Math.min(t,this.paginationStart+this.pageSize);for(let a=s;a<l;a++){const o=this.rows[a],r=[];let c=!1;e.push(i("tr",{class:"tbody__row"},this.renderMobileTitle(o),this.numbered&&this.renderTableBodyNumberedCell(a),this.selectable&&this.renderTableBodySelectableCell(a),o.map((d,h)=>{const n=this.fields[h];if(n.visible!==void 0?n.visible:u[n.type].defaults.visible!==void 0?u[n.type].defaults.visible:m.visible){if(n.type==="html"){if(!d)return this.renderTableCell(n,null,a,h);d.isExpanded&&(c=!0),r.push({content:d})}return this.renderTableCell(n,d,a,h)}}))),r.length&&e.push(i("div",{class:"tbody__nested",style:{width:this.contentWidth+"px",display:c?"block":"none"}},i("td",{class:"tbody__nested-cell"},r.map(({content:d})=>d&&i("div",{ref:h=>{if(h){let n=h.lastElementChild;for(;n;)h.removeChild(n),n=h.lastElementChild;h.appendChild(d)}}})))))}return e})())}renderMobileTitle(e){return this.mobileTitleIndex===-1?i("h5",{class:"tbody__mobile-title scl-h5"}," "):i("h5",{class:"tbody__mobile-title scl-h5"},e[this.mobileTitleIndex])}renderTableBodyNumberedCell(e){return i("td",{class:"tbody__cell tbody__cell--numbered",style:{width:this.numberColumnWidth+"px"}},i("p",{class:"scl-body"},e+1))}renderTableBodySelectableCell(e){const t={width:this.selectionColumnWidth+"px"};return this.numbered&&(t.marginLeft="0px",t.paddingLeft="0px"),i("td",{title:this.rows[e][0],class:"tbody__cell tbody__cell--selection",style:t},i("scale-checkbox",{checked:this.rows[e].selected,onScaleChange:s=>this.toggleRowSelect(s,e),hideLabel:!0}))}renderTableCell(e,t,s,l){const a=u[e.type],{label:o,width:r=a.defaults.width||m.width,stretchWidth:c=0,mobileTitle:d}=e;return i("td",{class:`tbody__cell${d?" tbody__cell--used-as-mobile-title":""}`,style:{width:`calc(${r}px + ${c}px)`}},i("div",{class:"tbody__mobile-label"},o),a.render({field:e,content:t,component:this,rowIndex:s,columnIndex:l}))}renderTableInfo(){return i("div",{class:"info"},this.selectable&&!!this.selection.length&&i("div",{class:"info__selection"},`${this.selection.length} row${this.selection.length>1?"s":""} selected`),this.isPagination&&i("scale-pagination",{class:"info__pagination",hideBorder:!this.isMobile,startElement:this.paginationStart,totalElements:this.rows.length,pageSize:this.pageSize,onScalePagination:({detail:e})=>this.paginationStart=e.startElement}))}render(){return this.dataNeedsCheck&&(this.hasData=this.checkHasData()),i(S,{style:{display:this.visible?"block":"none"}},this.styles&&i("style",null,this.styles),i("div",{class:this.getCssClassMap()},i("div",{class:`${b}__title-block`},this.heading&&i("h4",{class:`${b}__heading scl-h5`},this.heading),i("div",null,i("slot",null)),this.hasData&&this.renderSettingsMenu()),this.hasData&&this.renderTable(),this.hasData&&!this.hideInfo&&!this.needsAutoWidthParse&&(this.selectable||this.isPagination)&&this.renderTableInfo()))}get hostElement(){return T(this)}static get watchers(){return{fields:["fieldsHandler"],rows:["rowsHandler"]}}};V.style=U;export{V as scale_data_grid};
